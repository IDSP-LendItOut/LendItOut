<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>LendItOut</title>
  <link rel="stylesheet" href="./home.css">

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const buttons = document.querySelectorAll('.tab-buttons button');
      const content = document.getElementById('content');

      buttons.forEach(button => {
        button.addEventListener('click', async () => {

          buttons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');

          const tab = button.id === "buyingBtn" ? "buying" : "renting";
          const res = await fetch(`/${tab}`);
          const html = await res.text();

          const parser = new DOMParser();
          const doc = parser.parseFromString(html, "text/html");
          const newContent = doc.getElementById("content")?.innerHTML;

          if (newContent) {
            content.innerHTML = newContent;
          }
        });
      });
    });
  </script>


</head>

<body>
  <header>
    <h1>Home</h1>
    <input type="text" placeholder="Search your item here">
  </header>

  <div class="filter-rent-and-buy">

    <div class="tab-buttons">
      <button id="buyingBtn" class="active">Buying</button>
      <button id="rentingBtn">Renting</button>
      <!-- <form action="/buying" method="get" style="display: inline;">
        <button type="submit" id="buyingBtn">Buying</button>
      </form>

      <form action="/renting" method="get" style="display: inline;">
        <button type="submit" id="rentingBtn">Renting</button>
      </form> -->
    </div>

    <div class="category-box">
      <div class="category-top">
        <p>Categories</p>
        <p><a href="/">See all categories</a></p>
      </div>
      <div class="category-image">
        <div>
          <img src="https://picsum.photos/300/300" alt="Electronics & Gadgets">
          <p>Electronics & Gadgets</p>
        </div>
        <div>
          <img src="https://picsum.photos/300/300" alt="Fashion & Apparel">
          <p>Fashion & Apparel</p>
        </div>
        <div>
          <img src="https://picsum.photos/300/300" alt="Home & Furniture">
          <p>Home & Furniture</p>
        </div>
        <div>
          <img src="https://picsum.photos/300/300" alt="Beauty & Personal Care">
          <p>Beauty & Personal Care</p>
        </div>

      </div>
    </div>

  </div>

  <div id="content">
    <% if (content === 'buying') { %>
    <h3>buying content</h3>
    <% } else { %>
    <h3>renting content</h3>
    <% } %>
  </div>

</body>

</html>